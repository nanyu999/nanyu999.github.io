## 1.Pandas模块


### 1.1 什么是Pandas

> Pandas是一个开源的Python核心数据分析库，主要用于数据分析、数据处理、数据可视化。Pandas是数据分析三大剑客之一（Pandas、Numpy、Matplotlib），它提供了快速、灵活、明确的数据结构，能够简单、直观、快速的处理各种类型的数据。                    

Pandas处理的数据类型

- SQL或Excel表类似的数据
- 有序和无序的时间序列数据
- 带行列标签的矩阵数据
- 任意其他形式的观测、统计数据集

Pandas提供两个主要的数据结构，也是Pandas中两个重要的对象。

- Series：一维数据结构
- DataFrame：二维数组结构

| 维数 | 名称      | 描述                               |
| ---- | --------- | ---------------------------------- |
| 1    | Series    | 带标签的一维同构数组               |
| 2    | DataFrame | 带标签的，大小可变的，二维异构表格 |

Pandas是基于Numpy开发的，它可以与其他第三方科学计算库完美的集成。它是处理数据时最理想的工具。

**图解Series、DataFrame**

|      | 语文 | 数学 | 英语 |
| ---- | ---- | ---- | ---- |
| 0    | 110  | 105  | 99   |
| 1    | 105  | 88   | 115  |
| 3    | 109  | 120  | 130  |

<center>原始数据（成绩表）</center>

其中"语文"、"数学"、"英语"每一列都是一个Series对象。

- "语文"是一个Series对象

|      | 语文 |
| ---- | ---- |
| 0    | 110  |
| 1    | 105  |
| 2    | 109  |

- "数学"是一个Series对象

|      | 语文 |
| ---- | ---- |
| 0    | 105  |
| 1    | 88   |
| 2    | 115  |

- "英语"是一个Series对象

|      | 语文 |
| ---- | ---- |
| 0    | 109  |
| 1    | 120  |
| 2    | 130  |

而"语文"、"数学"、"英语"三列组成了一个DataFrame对象

|      | 语文 | 数学 | 英语 |
| ---- | ---- | ---- | ---- |
| 0    | 110  | 105  | 99   |
| 1    | 105  | 88   | 115  |
| 3    | 109  | 120  | 130  |



#### 1.1.1 创建Series对象

Series是Python的Pandas库中的一种数据结构，类似一维数组，由一组数据以及与这组数据相关的标签（索引）组成，或者仅有一组数据而没有索引也可以创建一个简单的Series对象。series可以存储整数、浮点数、字符串、Python对象等多种类型的数据。



##### 列表创建

> 创建Series对象时，主要使用Pandas的Series方法，可以从列表中创建Series对象。

```python
# 导入pandas模块
import pandas as pd
# 导入numpy模块
import numpy as np

s=pd.Series(5)
s 
# 输出结果
0    5
dtype: int64

print("---------------------------分割线----------------------------")  

s1=pd.Series([1,2,3,4])
print(s1)

# 输出结果
0    1
1    2
2    3
3    4
dtype: int64

print("---------------------------分割线----------------------------")  

s2=pd.Series([1,2,3,np.nan,5])
print(s2)

print("---------------------------分割线----------------------------")  
# 输出结果：
0    1.0
1    2.0
2    3.0
3    NaN
4    5.0
dtype: float64
```

**结果中的dtype是DataFrame数据的数据类型，int为整型，float为浮点型，后面的数字表示位数**

如上述成绩单实例，如果想想成绩表中添加一列物理成绩，可以通过创建一个Series对象来实现。

```python
import pandas as pd
s=pd.Series([80,90,100])
```

如果通过Pandas模块引入Series对象，则可以直接在程序中使用Series对象。

```python
import pandas as pd
s=Series([110,105,109])#语文成绩
```



##### numpy数组创建

> 创建Series对象时，可以通过numpy生成数组的方式创建Series对象。

```python
arr=np.array([1,2,3,4.5])
s=pd.Series(arr)
s

print("---------------------------分割线----------------------------")  
# 输出结果
0    1.0
1    2.0
2    3.0
3    4.5
dtype: float64
```

```python
s=pd.Series(np.array([1,2,3,4,5,2,4,6,np.nan,7,np.nan]))
print("s的长度：",len(s))
print("s的形状：",s.shape)
print("s中的非np.nan的个数：",s.count())
print("s中不重复元素：",s.unique())
print("s中非np.nan元素出现的次数：",s.value_counts())

print("---------------------------分割线----------------------------")  
# 输出结果
s的长度： 11
s的形状： (11,)
s中的非np.nan的个数： 9
s中不重复元素： [ 1.  2.  3.  4.  5.  6. nan  7.]
s中非np.nan元素出现的次数： 4.0    2
2.0    2
7.0    1
6.0    1
5.0    1
3.0    1
1.0    1
```



##### 字典创建

>  使用字典创建，默认字典的key对应Series对象的索引，value对应Series对象的值

```python 
s=pd.Series({"小明":88.0,"小石":98.9,"小丁":95.2})
print(s)
print("---------------------------分割线----------------------------")  
print(s.index)
print("---------------------------分割线----------------------------")  
print(s.values)

print("---------------------------分割线----------------------------")  
#输出结果
小明    88.0
小王    98.9
小赵    95.2
dtype: float64
---------------------------分割线----------------------------
Index(['小明', '小王', '小赵'], dtype='object')
---------------------------分割线----------------------------
[88. 98.9 95.2]
```

```python
data_dict = { 'BABA': 187.07, 'PDD': 21.83, 'JD': 30.79, 'BIDU': 184.77 }
s3 = pd.Series(data_dict, name='中概股')
s3.index.name = '股票代号'
s3

print("---------------------------分割线----------------------------")  
# 运行结果
股票代号
BABA    187.07
PDD      21.83
JD       30.79
BIDU    184.77
Name: 中概股, dtype: float64
        
print("---------------------------分割线----------------------------")    
# 由于data_dict中没有TW，但索引中有，因此输出结果中TW索引下对应的值为 NaN。
#再者，代号里没有BABA，因此输出结果里面没有 BABA 对应的值 (即便 data_dict 里面有)
sss={'TW','PDD','JD','BIDU'}
s=pd.Series(data_dict,index=sss)
s

print("---------------------------分割线----------------------------")   
# 输出结果
PDD      21.83
BIDU    184.77
TW         NaN
JD       30.79
dtype: float64
```

##### 手动设置索引

创建Series对象时会能自动生成整数索引，默认值从0开始，至数据长度减1，除了使用默认索引，我们在创建Series对象时还可以手动设置索引。

```python
s=pd.Series(1,index=['key1','key2','key3'])
s
# 输出结果
key1    1
key2    1
key3    1
dtype: int64

print("-------------------------------")

s=pd.Series([100,122,121],index=[4,5,6])
s
# 输出结果
4    100
5    122
6    121
dtype: int64

print("--------------------------------------------")

s=pd.Series([120,99,130],index=["小明","小丁","小石"])
s
# 输出结果
小明    120
小丁     99
小石    130
dtype: int64
```



- Series位置索引







